#!/usr/bin/env node
const pmc = require("../lib/prettier-markdown-codeblocks");
let markDown = "";
const path = process.argv[2];
if (path === "-h" || path === "--help") {
  console.log(require('../lib/usage'));
} else if (path) {
  pmc.correctDir(path);
} else {
  var readline = require("readline");
  var rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout,
    terminal: false
  });

  rl.on("line", line => {
    markDown += `${line}\n`;
  });

  rl.on("close", () => {
    process.stdout.write(pmc.correctString(markDown));
  });
}
